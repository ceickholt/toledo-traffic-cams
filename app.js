// shortened note: full JS from previous message ...